# 개발 일지

## Today 진행 내용 (약 2시간)

### 1. 사용자 위치 처리 구조 개선
- 브라우저 **Geolocation 권한 처리 로직을 별도 컴포넌트로 분리**
- 위치 요청 / 성공 / 실패 흐름을 컴포넌트 단위로 관리하도록 구조 변경
- 위치 권한 상태(허용 / 거부 / 미결정)에 따른 예외 처리 로직 정리

### 2. 위치 데이터 관리 방식 개선
- 사용자 위치 정보(`lat`, `lng`, `address`)를 **Pinia 스토어에서 중앙 관리**하도록 구조 수정
- 여러 페이지/컴포넌트에서 위치 데이터를 직접 요청하지 않고, 스토어 기반으로 참조하도록 통합
- 위치 정보 유무에 따라 API 호출을 제어하도록 방어 로직 추가

### 3. 페이지 흐름 및 UI 개선
- 위치 흐름 변경에 맞춰 **페이지 이동 순서 및 역할 재정비**
- Main 페이지 UI 레이아웃 및 가독성 개선
- 병원 리스트 로딩 시 **Skeleton UI 적용**으로 사용자 체감 개선

### 4. 병원 추천 데이터 처리
- 위치 + 증상 기반 병원 추천 API 호출 구조 정리
- 거리순 / 정확도순 정렬 UI 구조 개선
- 병원 가용 상태를 **주기적으로 갱신할 수 있는 구조 설계(주기적 재요청 방식)**

---

## 학습한 내용
- 브라우저 **위치 권한(Geolocation)**은 단순 API 호출이 아니라  
  권한 상태(`granted / denied / prompt`)에 따른 흐름 설계가 중요하다는 점을 체감
- 위치 정보를 컴포넌트별로 분산 관리할 경우 구조가 빠르게 복잡해질 수 있음을 인식
- 전역 상태 관리(Pinia)를 통해 **위치 데이터 단일 진입점(Single Source of Truth)**를 만드는 것이 유지보수에 유리함을 학습
- 위치 기반 API 호출 시, **위치 정보 유무에 따른 예외 처리와 호출 타이밍 제어**가 필수적임을 이해

---

## 완료한 것
- 사용자 위치 요청 로직을 별도 컴포넌트로 분리
- 위치 정보(`lat`, `lng`, `address`)를 Pinia 스토어에서 전역 관리하도록 구조 개선
- 추천 리스트 페이지에서 위치 + 증상 기반 병원 추천 API 호출 구조 정리
- 병원 리스트 로딩 시 Skeleton UI 적용
- 병원 가용 상태 주기적 갱신 구조 설계
- Main 페이지 UI 개선

---

## 실패한 것 / 부족했던 점
- 브라우저 위치 권한 상태에 따라 **예상치 못한 케이스(차단, 재요청 불가 등)**가 발생
- 위치 흐름을 전면 수정하면서 디버깅 시간이 예상보다 길어짐
- 전반적으로 작업 난이도가 높아 체력 소모가 컸음

---

## 내일 할 것
- 위치 받아오는 로직 재정리 및 안정화
- My Page UI 개선
